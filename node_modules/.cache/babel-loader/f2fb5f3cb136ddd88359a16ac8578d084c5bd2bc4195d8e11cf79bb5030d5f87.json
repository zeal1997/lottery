{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      phone: '',\n      password: '',\n      error: ''\n    };\n  },\n  methods: {\n    async handleLogin() {\n      // 前端验证\n      if (!/^1[3-9]\\d{9}$/.test(this.phone)) {\n        this.error = '请输入有效的手机号';\n        return;\n      }\n      if (this.password !== this.phone.slice(-6)) {\n        this.error = '密码必须是手机号后六位';\n        return;\n      }\n\n      // 调用登录action\n      // 修改前：const success = await this.$store.dispatch('login', { this.phone, this.password })\n      const success = await this.$store.dispatch('login', {\n        phone: this.phone,\n        password: this.password\n      });\n      if (success) {\n        this.$router.push(this.$store.state.hasDrawn ? '/result' : '/lottery');\n      } else {\n        this.error = '手机号不存在，请联系管理员';\n      }\n    }\n  }\n};","map":{"version":3,"names":["data","phone","password","error","methods","handleLogin","test","slice","success","$store","dispatch","$router","push","state","hasDrawn"],"sources":["/Users/jackie/Documents/vue/lottery/src/components/Login.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <h2>登录</h2>\n    <form @submit.prevent=\"handleLogin\">\n      <div class=\"form-group\">\n        <label>手机号：</label>\n        <input \n          type=\"text\" \n          v-model=\"phone\" \n          placeholder=\"请输入手机号\"\n          pattern=\"^1[3-9]\\d{9}$\"\n          required\n        >\n      </div>\n      <div class=\"form-group\">\n        <label>密码：</label>\n        <input \n          type=\"password\" \n          v-model=\"password\" \n          placeholder=\"请输入手机号后六位\"\n          pattern=\"^\\d{6}$\"\n          required\n        >\n      </div>\n      <button type=\"submit\" class=\"login-btn\">登录</button>\n      <div v-if=\"error\" class=\"error-message\">{{ error }}</div>\n    </form>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() { return { phone: '', password: '', error: '' }},\n  methods: {\n    async handleLogin() {\n      // 前端验证\n      if (!/^1[3-9]\\d{9}$/.test(this.phone)) {\n        this.error = '请输入有效的手机号'\n        return\n      }\n      if (this.password !== this.phone.slice(-6)) {\n        this.error = '密码必须是手机号后六位'\n        return\n      }\n\n      // 调用登录action\n      // 修改前：const success = await this.$store.dispatch('login', { this.phone, this.password })\n      const success = await this.$store.dispatch('login', { phone: this.phone, password: this.password })\n      if (success) {\n        this.$router.push(this.$store.state.hasDrawn ? '/result' : '/lottery')\n      } else {\n        this.error = '手机号不存在，请联系管理员'\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login-container { max-width: 400px; margin: 0 auto; padding: 20px; border: 1px solid #ccc; border-radius: 5px; }\n.form-group { margin-bottom: 15px; }\ninput { width: 100%; padding: 8px; margin-top: 5px; }\n.login-btn { width: 100%; padding: 10px; background: #42b983; color: white; border: none; border-radius: 5px; cursor: pointer; }\n.error-message { color: red; margin-top: 10px; }\n</style>"],"mappings":";AA+BA,eAAe;EACbA,IAAIA,CAAA,EAAG;IAAE,OAAO;MAAEC,KAAK,EAAE,EAAE;MAAEC,QAAQ,EAAE,EAAE;MAAEC,KAAK,EAAE;IAAG,CAAC;EAAA,CAAC;EACvDC,OAAO,EAAE;IACP,MAAMC,WAAWA,CAAA,EAAG;MAClB;MACA,IAAI,CAAC,eAAe,CAACC,IAAI,CAAC,IAAI,CAACL,KAAK,CAAC,EAAE;QACrC,IAAI,CAACE,KAAI,GAAI,WAAU;QACvB;MACF;MACA,IAAI,IAAI,CAACD,QAAO,KAAM,IAAI,CAACD,KAAK,CAACM,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE;QAC1C,IAAI,CAACJ,KAAI,GAAI,aAAY;QACzB;MACF;;MAEA;MACA;MACA,MAAMK,OAAM,GAAI,MAAM,IAAI,CAACC,MAAM,CAACC,QAAQ,CAAC,OAAO,EAAE;QAAET,KAAK,EAAE,IAAI,CAACA,KAAK;QAAEC,QAAQ,EAAE,IAAI,CAACA;MAAS,CAAC;MAClG,IAAIM,OAAO,EAAE;QACX,IAAI,CAACG,OAAO,CAACC,IAAI,CAAC,IAAI,CAACH,MAAM,CAACI,KAAK,CAACC,QAAO,GAAI,SAAQ,GAAI,UAAU;MACvE,OAAO;QACL,IAAI,CAACX,KAAI,GAAI,eAAc;MAC7B;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}