{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"lottery-container\"\n};\nconst _hoisted_2 = {\n  class: \"wheel-wrapper\"\n};\nconst _hoisted_3 = [\"src\"];\nconst _hoisted_4 = [\"disabled\"];\nconst _hoisted_5 = {\n  class: \"prize-preview\"\n};\nconst _hoisted_6 = {\n  class: \"preview-container\"\n};\nconst _hoisted_7 = [\"src\"];\nconst _hoisted_8 = {\n  class: \"preview-dots\"\n};\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = {\n  key: 0,\n  class: \"result-modal\"\n};\nconst _hoisted_11 = {\n  class: \"modal-content\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[5] || (_cache[5] = _createElementVNode(\"h2\", null, \"幸运大转盘\", -1 /* CACHED */)), _createCommentVNode(\" 原有的转盘部分保持不变 \"), _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"img\", {\n    src: require('@/assets/wheel.png'),\n    class: _normalizeClass([\"wheel\", {\n      spinning: $data.isSpinning\n    }]),\n    style: _normalizeStyle($options.wheelStyle),\n    alt: \"转盘\"\n  }, null, 14 /* CLASS, STYLE, PROPS */, _hoisted_3), _cache[2] || (_cache[2] = _createElementVNode(\"div\", {\n    class: \"wheel-pointer\"\n  }, null, -1 /* CACHED */))]), _createElementVNode(\"button\", {\n    class: \"draw-btn\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.startDraw && $options.startDraw(...args)),\n    disabled: $data.isSpinning || $options.hasDrawn\n  }, _toDisplayString($data.isSpinning ? '抽奖中...' : '开始抽奖'), 9 /* TEXT, PROPS */, _hoisted_4), _createCommentVNode(\" 奖品预览轮播 \"), _createElementVNode(\"div\", _hoisted_5, [_cache[3] || (_cache[3] = _createElementVNode(\"h3\", null, \"奖品预览\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"img\", {\n    src: $options.currentPreviewImage,\n    class: \"preview-image\",\n    alt: \"奖品预览\"\n  }, null, 8 /* PROPS */, _hoisted_7), _createElementVNode(\"div\", _hoisted_8, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.previewImages, (img, index) => {\n    return _openBlock(), _createElementBlock(\"span\", {\n      key: index,\n      class: _normalizeClass(['dot', {\n        active: index === $data.currentPreviewIndex\n      }]),\n      onClick: $event => $data.currentPreviewIndex = index\n    }, null, 10 /* CLASS, PROPS */, _hoisted_9);\n  }), 128 /* KEYED_FRAGMENT */))])])]), _createCommentVNode(\" 抽奖说明 \"), _cache[6] || (_cache[6] = _createElementVNode(\"div\", {\n    class: \"lottery-description\"\n  }, [_createElementVNode(\"p\", null, [_createElementVNode(\"strong\", null, \"说明：\"), _createTextVNode(\"限时抽奖活动，必须是2025年线上办理移动校园卡用户可参与。奖品有价值360元的移动话费卡，3用pAD1台，瑞幸咖啡券，网红充电宝，卡通插线板，网红小夜灯，小风扇，好看碗，轻奢水杯，泡泡玛特盲盒，炫彩雨伞等等。\")])], -1 /* CACHED */)), _createCommentVNode(\" 中奖弹窗 \"), $options.winningPrize ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [_cache[4] || (_cache[4] = _createElementVNode(\"h3\", null, \"你的抽奖结果为\", -1 /* CACHED */)), _createElementVNode(\"p\", null, \"奖品：\" + _toDisplayString($options.winningPrize.name), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.closeResult && $options.closeResult(...args))\n  }, \"确定\")])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","_hoisted_2","src","require","_normalizeClass","spinning","$data","isSpinning","style","_normalizeStyle","$options","wheelStyle","alt","onClick","_cache","args","startDraw","disabled","hasDrawn","_hoisted_4","_hoisted_5","_hoisted_6","currentPreviewImage","_hoisted_8","_Fragment","_renderList","previewImages","img","index","key","active","currentPreviewIndex","$event","winningPrize","_hoisted_10","_hoisted_11","_toDisplayString","name","closeResult"],"sources":["/Users/jackie/Documents/vue/lottery/src/components/LotteryWheel.vue"],"sourcesContent":["<template>\n  <div class=\"lottery-container\">\n    <h2>幸运大转盘</h2>\n    \n    <!-- 原有的转盘部分保持不变 -->\n    <div class=\"wheel-wrapper\">\n      <img \n        :src=\"require('@/assets/wheel.png')\" \n        class=\"wheel\" \n        :style=\"wheelStyle\" \n        :class=\"{ spinning: isSpinning }\"\n        alt=\"转盘\"\n      />\n      <div class=\"wheel-pointer\"></div>\n    </div>\n    <button class=\"draw-btn\" @click=\"startDraw\" :disabled=\"isSpinning || hasDrawn\">\n      {{ isSpinning ? '抽奖中...' : '开始抽奖' }}\n    </button>\n    \n    <!-- 奖品预览轮播 -->\n    <div class=\"prize-preview\">\n      <h3>奖品预览</h3>\n      <div class=\"preview-container\">\n        <img \n          :src=\"currentPreviewImage\" \n          class=\"preview-image\" \n          alt=\"奖品预览\"\n        />\n        <div class=\"preview-dots\">\n          <span \n            v-for=\"(img, index) in previewImages\" \n            :key=\"index\"\n            :class=\"['dot', { active: index === currentPreviewIndex }]\"\n            @click=\"currentPreviewIndex = index\"\n          ></span>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 抽奖说明 -->\n    <div class=\"lottery-description\">\n      <p><strong>说明：</strong>限时抽奖活动，必须是2025年线上办理移动校园卡用户可参与。奖品有价值360元的移动话费卡，3用pAD1台，瑞幸咖啡券，网红充电宝，卡通插线板，网红小夜灯，小风扇，好看碗，轻奢水杯，泡泡玛特盲盒，炫彩雨伞等等。</p>\n    </div>\n    \n    <!-- 中奖弹窗 -->\n    <div v-if=\"winningPrize\" class=\"result-modal\">\n      <div class=\"modal-content\">\n        <h3>你的抽奖结果为</h3>\n        <p>奖品：{{ winningPrize.name }}</p>\n        <button @click=\"closeResult\">确定</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() { \n    return { \n      rotateDegree: 0, \n      isSpinning: false, \n      spinningTime: 5000,\n      currentPreviewIndex: 0,\n      previewImages: [\n        require('@/assets/round/360话费.jpg'),\n        require('@/assets/round/pad.jpg'),\n        require('@/assets/round/咖啡券.jpg'),\n        require('@/assets/round/泡面碗.jpg'),\n        require('@/assets/round/炫彩雨伞.jpg'),\n        require('@/assets/round/网红小夜灯.jpg'),\n        require('@/assets/round/轻奢水杯.jpg'),\n        require('@/assets/round/卡套插线板.jpg'),\n        require('@/assets/round/充电宝.jpg'),\n        require('@/assets/round/labubu.jpg')\n      ],\n      previewInterval: null\n    }\n  },\n  computed: {\n    currentPreviewImage() {\n      return this.previewImages[this.currentPreviewIndex]\n    },\n    availablePrizes() { \n      return this.$store.state.prizes.filter(p => p.count > 0) \n    },\n    hasDrawn() { \n      return this.$store.state.hasDrawn \n    },\n    winningPrize() { \n      return this.$store.state.winningPrize \n    },\n    wheelStyle() {\n      return {\n        transform: `rotate(${this.rotateDegree}deg)`\n      }\n    }\n  },\n  methods: {\n    startPreviewRotation() {\n      this.previewInterval = setInterval(() => {\n        this.currentPreviewIndex = (this.currentPreviewIndex + 1) % this.previewImages.length\n      }, 3000)\n    },\n    \n    startDraw() {\n      this.isSpinning = true\n      this.rotateDegree += 360 * 5 + Math.random() * 360\n\n      setTimeout(() => {\n        this.isSpinning = false\n        this.$store.dispatch('drawPrize')\n      }, this.spinningTime)\n    },\n    \n    closeResult() { \n      this.$router.push('/result') \n    }\n  },\n  mounted() {\n    // 启动自动轮播\n    this.startPreviewRotation()\n  },\n  \n  beforeUnmount() {\n    // 清除定时器\n    if (this.previewInterval) {\n      clearInterval(this.previewInterval)\n    }\n  }\n}\n</script>\n\n<style scoped>\n.lottery-container {\n  text-align: center;\n  padding: 20px;\n}\n\n.wheel-wrapper {\n  position: relative;\n  width: 300px;\n  height: 300px;\n  margin: 0 auto;\n}\n\n.wheel {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  transition: transform 5s cubic-bezier(0.2, 0.8, 0.2, 1);\n}\n\n.wheel-pointer {\n  position: absolute;\n  top: -15px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 30px;\n  height: 30px;\n  background-color: #ff4d4f;\n  clip-path: polygon(50% 0%, 0% 100%, 100% 100%);\n  z-index: 10;\n}\n\n.draw-btn {\n  margin-top: 30px;\n  padding: 10px 30px;\n  background-color: #42b983;\n  color: white;\n  border: none;\n  border-radius: 20px;\n  font-size: 16px;\n  cursor: pointer;\n  outline: none;\n}\n\n.draw-btn:disabled {\n  background-color: #ccc;\n  cursor: not-allowed;\n}\n\n.result-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0,0,0,0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.modal-content {\n  background-color: white;\n  padding: 30px;\n  border-radius: 10px;\n  text-align: center;\n}\n\n.modal-content button {\n  margin-top: 20px;\n  padding: 8px 20px;\n  background-color: #42b983;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.lottery-description {\n  margin-top: 30px;\n  padding: 20px;\n  background-color: #f8f9fa;\n  border-radius: 8px;\n  max-width: 600px;\n  margin-left: auto;\n  margin-right: auto;\n  text-align: left;\n  line-height: 1.6;\n  color: #666;\n  font-size: 14px;\n}\n\n.lottery-description p {\n  margin: 0;\n}\n\n/* 奖品预览样式 */\n.prize-preview {\n  margin-top: 30px;\n  padding: 20px;\n  background-color: #fff;\n  border-radius: 10px;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n  max-width: 400px;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.prize-preview h3 {\n  margin-bottom: 15px;\n  color: #333;\n  font-size: 18px;\n}\n\n.preview-container {\n  position: relative;\n  height: 200px;\n  overflow: hidden;\n  border-radius: 8px;\n}\n\n.preview-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  transition: opacity 0.5s ease-in-out;\n}\n\n.preview-dots {\n  position: absolute;\n  bottom: 10px;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  gap: 8px;\n}\n\n.dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background-color: rgba(255,255,255,0.5);\n  cursor: pointer;\n  transition: background-color 0.3s;\n}\n\n.dot.active {\n  background-color: #fff;\n}\n\n.dot:hover {\n  background-color: rgba(255,255,255,0.8);\n}\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAmB;;EAIvBA,KAAK,EAAC;AAAe;;;;EAerBA,KAAK,EAAC;AAAe;;EAEnBA,KAAK,EAAC;AAAmB;;;EAMvBA,KAAK,EAAC;AAAc;;;;EAiBJA,KAAK,EAAC;;;EACxBA,KAAK,EAAC;AAAe;;uBA7C9BC,mBAAA,CAmDM,OAnDNC,UAmDM,G,0BAlDJC,mBAAA,CAAc,YAAV,OAAK,qBAETC,mBAAA,iBAAoB,EACpBD,mBAAA,CASM,OATNE,UASM,GARJF,mBAAA,CAME;IALCG,GAAG,EAAEC,OAAO;IACbP,KAAK,EAAAQ,eAAA,EAAC,OAAO;MAAAC,QAAA,EAEOC,KAAA,CAAAC;IAAU;IAD7BC,KAAK,EAAAC,eAAA,CAAEC,QAAA,CAAAC,UAAU;IAElBC,GAAG,EAAC;gFAENb,mBAAA,CAAiC;IAA5BH,KAAK,EAAC;EAAe,2B,GAE5BG,mBAAA,CAES;IAFDH,KAAK,EAAC,UAAU;IAAEiB,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEL,QAAA,CAAAM,SAAA,IAAAN,QAAA,CAAAM,SAAA,IAAAD,IAAA,CAAS;IAAGE,QAAQ,EAAEX,KAAA,CAAAC,UAAU,IAAIG,QAAA,CAAAQ;sBAChEZ,KAAA,CAAAC,UAAU,4CAAAY,UAAA,GAGfnB,mBAAA,YAAe,EACfD,mBAAA,CAiBM,OAjBNqB,UAiBM,G,0BAhBJrB,mBAAA,CAAa,YAAT,MAAI,qBACRA,mBAAA,CAcM,OAdNsB,UAcM,GAbJtB,mBAAA,CAIE;IAHCG,GAAG,EAAEQ,QAAA,CAAAY,mBAAmB;IACzB1B,KAAK,EAAC,eAAe;IACrBgB,GAAG,EAAC;uCAENb,mBAAA,CAOM,OAPNwB,UAOM,I,kBANJ1B,mBAAA,CAKQ2B,SAAA,QAAAC,WAAA,CAJiBnB,KAAA,CAAAoB,aAAa,GAA5BC,GAAG,EAAEC,KAAK;yBADpB/B,mBAAA,CAKQ;MAHLgC,GAAG,EAAED,KAAK;MACVhC,KAAK,EAAAQ,eAAA;QAAA0B,MAAA,EAAoBF,KAAK,KAAKtB,KAAA,CAAAyB;MAAmB;MACtDlB,OAAK,EAAAmB,MAAA,IAAE1B,KAAA,CAAAyB,mBAAmB,GAAGH;;wCAMtC5B,mBAAA,UAAa,E,0BACbD,mBAAA,CAEM;IAFDH,KAAK,EAAC;EAAqB,IAC9BG,mBAAA,CAAoI,YAAjIA,mBAAA,CAAoB,gBAAZ,KAAG,G,iBAAS,2GAAyG,E,uBAGlIC,mBAAA,UAAa,EACFU,QAAA,CAAAuB,YAAY,I,cAAvBpC,mBAAA,CAMM,OANNqC,WAMM,GALJnC,mBAAA,CAIM,OAJNoC,WAIM,G,0BAHJpC,mBAAA,CAAgB,YAAZ,SAAO,qBACXA,mBAAA,CAAiC,WAA9B,KAAG,GAAAqC,gBAAA,CAAG1B,QAAA,CAAAuB,YAAY,CAACI,IAAI,kBAC1BtC,mBAAA,CAAwC;IAA/Bc,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEL,QAAA,CAAA4B,WAAA,IAAA5B,QAAA,CAAA4B,WAAA,IAAAvB,IAAA,CAAW;KAAE,IAAE,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}