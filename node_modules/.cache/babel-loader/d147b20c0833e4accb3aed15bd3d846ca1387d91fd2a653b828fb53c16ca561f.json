{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nexport default {\n  data() {\n    return {\n      rotateDegree: 0,\n      isSpinning: false,\n      spinningTime: 5000,\n      currentPreviewIndex: 0,\n      previewImages: [{\n        name: '360话费',\n        src: require('@/assets/round/360话费.jpg')\n      }, {\n        name: 'PAD',\n        src: require('@/assets/round/pad.jpg')\n      }, {\n        name: '咖啡券',\n        src: require('@/assets/round/咖啡券.jpg')\n      }, {\n        name: '泡面碗',\n        src: require('@/assets/round/泡面碗.jpg')\n      }, {\n        name: '炫彩雨伞',\n        src: require('@/assets/round/炫彩雨伞.jpg')\n      }, {\n        name: '网红小夜灯',\n        src: require('@/assets/round/网红小夜灯.jpg')\n      }, {\n        name: '轻奢水杯',\n        src: require('@/assets/round/轻奢水杯.jpg')\n      }, {\n        name: '卡套插线板',\n        src: require('@/assets/round/卡套插线板.jpg')\n      }, {\n        name: '充电宝',\n        src: require('@/assets/round/充电宝.jpg')\n      }, {\n        name: 'LABUBU',\n        src: require('@/assets/round/labubu.jpg')\n      }],\n      previewInterval: null\n    };\n  },\n  computed: {\n    currentPreviewImage() {\n      return this.previewImages[this.currentPreviewIndex].src;\n    },\n    currentPreviewName() {\n      return this.previewImages[this.currentPreviewIndex].name;\n    },\n    availablePrizes() {\n      return this.$store.state.prizes.filter(p => p.count > 0);\n    },\n    hasDrawn() {\n      return this.$store.state.hasDrawn;\n    },\n    winningPrize() {\n      return this.$store.state.winningPrize;\n    },\n    wheelStyle() {\n      return {\n        transform: `rotate(${this.rotateDegree}deg)`\n      };\n    }\n  },\n  methods: {\n    startPreviewRotation() {\n      this.previewInterval = setInterval(() => {\n        this.currentPreviewIndex = (this.currentPreviewIndex + 1) % this.previewImages.length;\n      }, 3000); // 每3秒切换一次\n    },\n    startDraw() {\n      this.isSpinning = true;\n      this.rotateDegree += 360 * 5 + Math.random() * 360;\n      setTimeout(() => {\n        this.isSpinning = false;\n        this.$store.dispatch('drawPrize');\n      }, this.spinningTime);\n    },\n    closeResult() {\n      this.$router.push('/result');\n    }\n  },\n  mounted() {\n    // 启动自动轮播\n    this.startPreviewRotation();\n  },\n  beforeUnmount() {\n    // 清除定时器\n    if (this.previewInterval) {\n      clearInterval(this.previewInterval);\n    }\n  }\n};","map":{"version":3,"names":["data","rotateDegree","isSpinning","spinningTime","currentPreviewIndex","previewImages","name","src","require","previewInterval","computed","currentPreviewImage","currentPreviewName","availablePrizes","$store","state","prizes","filter","p","count","hasDrawn","winningPrize","wheelStyle","transform","methods","startPreviewRotation","setInterval","length","startDraw","Math","random","setTimeout","dispatch","closeResult","$router","push","mounted","beforeUnmount","clearInterval"],"sources":["/Users/jackie/Documents/vue/lottery/src/components/LotteryWheel.vue"],"sourcesContent":["<template>\n  <div class=\"lottery-container\">\n    \n    <h2>幸运大转盘</h2>\n     <!-- 原有的抽奖说明 -->\n   \n    <!-- 原有的转盘部分保持不变 -->\n    <div class=\"wheel-wrapper\">\n      <img \n        :src=\"require('@/assets/wheel.png')\" \n        class=\"wheel\" \n        :style=\"wheelStyle\" \n        :class=\"{ spinning: isSpinning }\"\n        alt=\"转盘\"\n      />\n      <div class=\"wheel-pointer\"></div>\n    </div>\n    <button class=\"draw-btn\" @click=\"startDraw\" :disabled=\"isSpinning || hasDrawn\">\n      {{ isSpinning ? '抽奖中...' : '开始抽奖' }}\n    </button>\n     <div class=\"lottery-description\">\n      <p><strong>说明：</strong>限时抽奖活动，必须是2025年线上办理移动校园卡用户可参与。奖品有价值360元的移动话费卡，3用PAD1台，瑞幸咖啡券，网红充电宝，卡通插线板，网红小夜灯，小风扇，泡面碗，轻奢水杯，泡泡玛特盲盒，炫彩雨伞等等。</p>\n    </div>\n    <!-- 新增的奖品预览轮播 -->\n    <div class=\"prize-preview\">\n      <h3>奖品预览</h3>\n      <div class=\"preview-container\">\n        <img \n          :src=\"currentPreviewImage\" \n          class=\"preview-image\" \n          :alt=\"currentPreviewName\"\n        />\n        <div class=\"preview-name\">{{ currentPreviewName }}</div>\n        <div class=\"preview-dots\">\n          <span \n            v-for=\"(item, index) in previewImages\" \n            :key=\"index\"\n            :class=\"['dot', { active: index === currentPreviewIndex }]\"\n            @click=\"currentPreviewIndex = index\"\n          ></span>\n        </div>\n      </div>\n    </div>\n    \n   \n    \n    <!-- 中奖弹窗 -->\n    <div v-if=\"winningPrize\" class=\"result-modal\">\n      <div class=\"modal-content\">\n        <h3 v-if=\"winningPrize.name === '谢谢参与'\">{{ winningPrize.name }}</h3>\n        <div v-else>\n          <h3>恭喜您中奖了！</h3>\n          <p>奖品：{{ winningPrize.name }}</p>\n        </div>\n        <button @click=\"closeResult\">确定</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() { \n    return { \n      rotateDegree: 0, \n      isSpinning: false, \n      spinningTime: 5000,\n      currentPreviewIndex: 0,\n      previewImages: [\n        { name: '360话费', src: require('@/assets/round/360话费.jpg') },\n        { name: 'PAD', src: require('@/assets/round/pad.jpg') },\n        { name: '咖啡券', src: require('@/assets/round/咖啡券.jpg') },\n        { name: '泡面碗', src: require('@/assets/round/泡面碗.jpg') },\n        { name: '炫彩雨伞', src: require('@/assets/round/炫彩雨伞.jpg') },\n        { name: '网红小夜灯', src: require('@/assets/round/网红小夜灯.jpg') },\n        { name: '轻奢水杯', src: require('@/assets/round/轻奢水杯.jpg') },\n        { name: '卡套插线板', src: require('@/assets/round/卡套插线板.jpg') },\n        { name: '充电宝', src: require('@/assets/round/充电宝.jpg') },\n        { name: 'LABUBU', src: require('@/assets/round/labubu.jpg') }\n      ],\n      previewInterval: null\n    }\n  },\n  computed: {\n    currentPreviewImage() {\n      return this.previewImages[this.currentPreviewIndex].src\n    },\n    currentPreviewName() {\n      return this.previewImages[this.currentPreviewIndex].name\n    },\n    availablePrizes() { \n      return this.$store.state.prizes.filter(p => p.count > 0) \n    },\n    hasDrawn() { \n      return this.$store.state.hasDrawn \n    },\n    winningPrize() { \n      return this.$store.state.winningPrize \n    },\n    wheelStyle() {\n      return {\n        transform: `rotate(${this.rotateDegree}deg)`\n      }\n    }\n  },\n  methods: {\n    startPreviewRotation() {\n      this.previewInterval = setInterval(() => {\n        this.currentPreviewIndex = (this.currentPreviewIndex + 1) % this.previewImages.length\n      }, 3000) // 每3秒切换一次\n    },\n    \n    startDraw() {\n      this.isSpinning = true\n      this.rotateDegree += 360 * 5 + Math.random() * 360\n\n      setTimeout(() => {\n        this.isSpinning = false\n        this.$store.dispatch('drawPrize')\n      }, this.spinningTime)\n    },\n    \n    closeResult() { \n      this.$router.push('/result') \n    }\n  },\n  mounted() {\n    // 启动自动轮播\n    this.startPreviewRotation()\n  },\n  \n  beforeUnmount() {\n    // 清除定时器\n    if (this.previewInterval) {\n      clearInterval(this.previewInterval)\n    }\n  },\n}\n</script>\n\n<style scoped>\n.lottery-container {\n  text-align: center;\n  padding: 20px;\n}\n\n.wheel-wrapper {\n  position: relative;\n  width: 300px;\n  height: 300px;\n  margin: 0 auto;\n}\n\n.wheel {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  transition: transform 5s cubic-bezier(0.2, 0.8, 0.2, 1);\n}\n\n.wheel-pointer {\n  position: absolute;\n  top: -15px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 30px;\n  height: 30px;\n  background-color: #ff4d4f;\n  clip-path: polygon(50% 0%, 0% 100%, 100% 100%);\n  z-index: 10;\n}\n\n.draw-btn {\n  margin-top: 30px;\n  padding: 10px 30px;\n  background-color: #42b983;\n  color: white;\n  border: none;\n  border-radius: 20px;\n  font-size: 16px;\n  cursor: pointer;\n  outline: none;\n}\n\n.draw-btn:disabled {\n  background-color: #ccc;\n  cursor: not-allowed;\n}\n\n.result-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0,0,0,0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.modal-content {\n  background-color: white;\n  padding: 30px;\n  border-radius: 10px;\n  text-align: center;\n}\n\n.modal-content button {\n  margin-top: 20px;\n  padding: 8px 20px;\n  background-color: #42b983;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.lottery-description {\n  margin-top: 30px;\n  padding: 20px;\n  background-color: #f8f9fa;\n  border-radius: 8px;\n  max-width: 600px;\n  margin-left: auto;\n  margin-right: auto;\n  text-align: left;\n  line-height: 1.6;\n  color: #666;\n  font-size: 14px;\n}\n\n.lottery-description p {\n  margin: 0;\n}\n\n\n\n\n\n.prize-preview {\n  margin-top: 30px;\n  padding: 20px;\n  background-color: #fff;\n  border-radius: 10px;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n  max-width: 400px;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.prize-preview h3 {\n  margin-bottom: 15px;\n  color: #333;\n  font-size: 18px;\n}\n\n.preview-container {\n  position: relative;\n  height: 200px;\n  overflow: hidden;\n  border-radius: 8px;\n}\n\n.preview-image {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  transition: opacity 0.5s ease-in-out;\n}\n\n.preview-dots {\n  position: absolute;\n  bottom: 10px;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  gap: 8px;\n}\n\n.dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background-color: rgba(255,255,255,0.5);\n  cursor: pointer;\n  transition: background-color 0.3s;\n}\n\n.dot.active {\n  background-color: #fff;\n}\n\n.dot:hover {\n  background-color: rgba(255,255,255,0.8);\n}\n\n.preview-name {\n  position: absolute;\n  bottom: 30px;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: rgba(0, 0, 0, 0.7);\n  color: white;\n  padding: 5px 10px;\n  border-radius: 4px;\n  font-size: 14px;\n  z-index: 10;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}